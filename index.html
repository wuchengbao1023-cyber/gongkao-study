<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å…¬è€ƒæ™ºèƒ½å­¦ä¹ ç³»ç»Ÿ v3.0 | æ‰‹æœºä¼˜åŒ–+æ™ºèƒ½æ¨è</title>
    <style>
        /* ========== åŸºç¡€é‡ç½® ========== */
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif; line-height: 1.6; color: #2c3e50; background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%); padding: 10px; min-height: 100vh; }
        
        /* ========== å®¹å™¨ ========== */
        .container { max-width: 1200px; margin: 0 auto; }
        
        /* ========== çŠ¶æ€æ  ========== */
        .status-bar { background: white; border-radius: 14px; padding: 15px 18px; margin-bottom: 15px; box-shadow: 0 6px 20px rgba(0,0,0,0.06); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; border: 1px solid rgba(255,255,255,0.3); position: relative; overflow: hidden; }
        .status-bar::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #667eea, #764ba2, #f093fb); }
        .status-info { display: flex; gap: 15px; flex-wrap: wrap; flex: 1; justify-content: space-between; }
        .status-item { text-align: center; min-width: 70px; flex: 1; position: relative; }
        .status-label { font-size: 12px; color: #7f8c8d; margin-bottom: 5px; font-weight: 500; }
        .status-value { font-size: 20px; font-weight: 800; color: #2c3e50; }
        
        /* ========== AIæ•™ç»ƒåŒºåŸŸ ========== */
        .ai-coach { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 16px; border-radius: 12px; margin-bottom: 20px; position: relative; overflow: hidden; }
        .ai-coach::before { content: ''; position: absolute; top: -50%; right: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.1) 1%, transparent 1%); background-size: 15px 15px; opacity: 0.3; }
        .coach-content { position: relative; z-index: 2; }
        .coach-header { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
        .coach-avatar { width: 40px; height: 40px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; color: #667eea; }
        .coach-title { font-weight: 700; font-size: 16px; }
        .coach-message { font-size: 14px; opacity: 0.95; line-height: 1.5; }
        .coach-suggestion { background: rgba(255,255,255,0.15); border-radius: 8px; padding: 12px; margin-top: 10px; border-left: 3px solid rgba(255,255,255,0.3); }
        .suggestion-title { font-weight: 600; font-size: 14px; margin-bottom: 6px; display: flex; align-items: center; gap: 6px; }
        .suggestion-detail { font-size: 13px; opacity: 0.9; }
        .suggestion-actions { display: flex; gap: 10px; margin-top: 10px; }
        
        /* ========== æ¨èå¡ç‰‡ ========== */
        .recommendation-card { background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%); border-radius: 12px; padding: 16px; margin-bottom: 15px; color: #333; position: relative; overflow: hidden; }
        .recommendation-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, transparent 60%, rgba(255,255,255,0.2) 100%); }
        .rec-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .rec-badge { background: rgba(255,255,255,0.3); padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: 600; backdrop-filter: blur(10px); }
        .rec-priority { font-size: 11px; color: #666; }
        .rec-content h3 { font-size: 18px; margin-bottom: 8px; font-weight: 700; }
        .rec-stats { display: flex; gap: 15px; margin-bottom: 10px; flex-wrap: wrap; }
        .stat-item { font-size: 13px; display: flex; align-items: center; gap: 4px; }
        .rec-reason { font-size: 13px; color: #555; line-height: 1.5; }
        .rec-actions { display: flex; gap: 10px; margin-top: 15px; }
        
        /* ========== ä¸»å†…å®¹åŒº ========== */
        .main-content { display: block; gap: 15px; }
        @media (min-width: 992px) { .main-content { display: grid; grid-template-columns: 2.5fr 1.5fr; } }
        
        /* ========== å·¦ä¾§å­¦ä¹ åŒº ========== */
        .learning-area { background: white; border-radius: 14px; padding: 18px; margin-bottom: 15px; box-shadow: 0 6px 20px rgba(0,0,0,0.06); }
        
        /* è¿›åº¦æ¡ */
        .progress-container { margin: 20px 0; }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .progress-label { font-weight: 600; color: #2c3e50; display: flex; align-items: center; gap: 8px; font-size: 15px; }
        .progress-percent { font-weight: 700; font-size: 16px; color: #27ae60; }
        .progress-bar { height: 8px; background: #ecf0f1; border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #2ecc71, #27ae60); border-radius: 4px; transition: width 0.8s ease; }
        
        /* æ¨¡å—åˆ—è¡¨ */
        .modules-list { margin-top: 25px; }
        .modules-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px; }
        .modules-title { font-size: 17px; font-weight: 700; color: #2c3e50; }
        .module-filters { display: flex; gap: 8px; flex-wrap: wrap; }
        .filter-btn { padding: 6px 12px; border: 1px solid #dfe6e9; border-radius: 18px; background: white; font-size: 13px; color: #636e72; cursor: pointer; transition: all 0.3s; }
        .filter-btn.active { background: #3498db; color: white; border-color: #3498db; }
        
        /* æ¨¡å—é¡¹ */
        .module-item { border: 1px solid #e0e6ed; border-radius: 12px; padding: 16px; margin-bottom: 12px; transition: all 0.3s; position: relative; overflow: hidden; background: white; }
        .module-item:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.08); }
        .module-item.completed { background: linear-gradient(135deg, #f8fff8 0%, #f0f9f0 100%); border-color: #c8e6c9; }
        .module-item.recommended { background: linear-gradient(135deg, #fffaf0 0%, #fff8e1 100%); border-color: #ffd54f; animation: gentlePulse 3s infinite; }
        .module-item.weak { background: linear-gradient(135deg, #fff5f5 0%, #ffebee 100%); border-color: #ffcdd2; border-left: 4px solid #ff6b6b; }
        @keyframes gentlePulse { 0%,100% { box-shadow: 0 0 0 rgba(255,193,7,0); } 50% { box-shadow: 0 0 0 3px rgba(255,193,7,0.15); } }
        
        .module-number { position: absolute; top: 12px; left: 12px; width: 26px; height: 26px; background: linear-gradient(135deg, #3498db, #2980b9); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 700; }
        .module-content { margin-left: 36px; }
        .module-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }
        .module-title { font-weight: 700; font-size: 16px; color: #2c3e50; line-height: 1.4; }
        .module-badge { font-size: 11px; padding: 4px 10px; border-radius: 16px; font-weight: 600; background: linear-gradient(135deg, #ff9800, #ff5722); color: white; }
        .module-hint { font-size: 12px; color: #666; padding: 6px 10px; background: #f8f9fa; border-radius: 8px; margin: 8px 0; border-left: 3px solid #3498db; }
        .module-meta { font-size: 13px; color: #636e72; margin-bottom: 10px; display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
        .module-stats { display: flex; gap: 12px; margin-bottom: 12px; flex-wrap: wrap; }
        .stat-badge { font-size: 12px; padding: 5px 10px; background: #f8f9fa; border-radius: 10px; color: #2c3e50; display: inline-flex; align-items: center; gap: 4px; border: 1px solid #edf2f7; }
        .module-actions { display: flex; gap: 8px; margin-top: 12px; }
        
        /* ========== æŒ‰é’®æ ·å¼ ========== */
        .btn { padding: 12px 20px; border: none; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; justify-content: center; gap: 6px; min-height: 44px; min-width: 44px; user-select: none; position: relative; overflow: hidden; }
        .btn::after { content: ''; position: absolute; top: 50%; left: 50%; width: 5px; height: 5px; background: rgba(255,255,255,0.5); opacity: 0; border-radius: 100%; transform: scale(1,1) translate(-50%); transform-origin: 50% 50%; }
        .btn:active::after { animation: ripple 1s ease-out; }
        @keyframes ripple { 0% { transform: scale(0,0); opacity: 0.5; } 100% { transform: scale(20,20); opacity: 0; } }
        
        .btn-primary { background: linear-gradient(135deg, #3498db, #2980b9); color: white; }
        .btn-success { background: linear-gradient(135deg, #27ae60, #2ecc71); color: white; }
        .btn-warning { background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; }
        .btn-secondary { background: #e0e6ed; color: #4a5568; }
        .btn-small { padding: 8px 14px; font-size: 13px; min-height: 36px; }
        
        /* ========== å³ä¾§åˆ†æåŒº ========== */
        .analytics-area { background: white; border-radius: 14px; padding: 18px; margin-bottom: 15px; box-shadow: 0 6px 20px rgba(0,0,0,0.06); height: fit-content; }
        .analytics-card { margin-bottom: 25px; }
        .analytics-title { font-size: 16px; font-weight: 700; color: #2c3e50; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #f0f4f8; display: flex; align-items: center; gap: 8px; }
        
        /* å­¦ä¹ ä»ªè¡¨ç›˜ */
        .dashboard-stats { display: grid; grid-template-columns: repeat(2,1fr); gap: 12px; margin-bottom: 15px; }
        .dashboard-stat { text-align: center; padding: 12px; background: #f8fafc; border-radius: 10px; border: 1px solid #edf2f7; }
        .dashboard-value { font-size: 20px; font-weight: 800; color: #2c3e50; margin: 6px 0; }
        .dashboard-label { font-size: 11px; color: #718096; font-weight: 500; }
        
        /* ========== å¼¹çª—ç³»ç»Ÿ ========== */
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 1000; align-items: center; justify-content: center; padding: 15px; backdrop-filter: blur(5px); }
        .modal-content { background: white; border-radius: 16px; padding: 24px; max-width: 500px; width: 100%; max-height: 85vh; overflow-y: auto; animation: modalSlideIn 0.4s ease; }
        @keyframes modalSlideIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* æ¨¡å—è¯¦æƒ…å¼¹çª— */
        .module-details { padding: 20px; }
        .detail-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .detail-title { font-size: 20px; font-weight: 700; color: #2c3e50; }
        .detail-category { font-size: 14px; color: #718096; background: #f7fafc; padding: 4px 10px; border-radius: 12px; }
        .detail-stats-grid { display: grid; grid-template-columns: repeat(2,1fr); gap: 15px; margin-bottom: 20px; }
        .detail-stat { text-align: center; padding: 15px; background: #f8fafc; border-radius: 10px; }
        .detail-stat-value { font-size: 24px; font-weight: 800; color: #2c3e50; margin: 8px 0; }
        .detail-stat-label { font-size: 12px; color: #718096; }
        
        /* ========== ä»Šæ—¥æ€»ç»“å¡ç‰‡ ========== */
        .daily-summary { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); border-radius: 12px; padding: 20px; margin: 20px 0; color: #333; }
        .summary-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .summary-title { font-size: 18px; font-weight: 700; }
        .summary-date { font-size: 14px; color: #666; }
        .summary-grid { display: grid; grid-template-columns: repeat(2,1fr); gap: 15px; }
        .summary-item { text-align: center; padding: 12px; background: rgba(255,255,255,0.3); border-radius: 8px; backdrop-filter: blur(10px); }
        .summary-value { font-size: 20px; font-weight: 700; margin: 6px 0; }
        .summary-label { font-size: 12px; color: #555; }
        
        /* ========== å“åº”å¼è®¾è®¡ ========== */
        @media (max-width: 767px) {
            .status-bar { padding: 14px; }
            .status-item { min-width: 65px; }
            .status-value { font-size: 18px; }
            .ai-coach, .learning-area, .analytics-area { padding: 16px; }
            .module-item { padding: 14px; }
            .module-content { margin-left: 34px; }
            .dashboard-stats { grid-template-columns: repeat(2,1fr); }
            .modal-content { padding: 20px; margin: 5px; }
            .detail-stats-grid { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 480px) {
            .status-value { font-size: 16px; }
            .module-item { padding: 12px; }
            .module-content { margin-left: 32px; }
            .btn { padding: 10px 16px; font-size: 13px; }
            .dashboard-stats { grid-template-columns: 1fr; }
        }
        
        /* æ¨ªå±ä¼˜åŒ– */
        @media (max-height: 500px) and (orientation: landscape) {
            .status-bar { padding: 10px 14px; }
            .ai-coach { padding: 10px; margin-bottom: 12px; }
            .learning-area, .analytics-area { padding: 12px; }
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loader { text-align: center; padding: 30px; }
        .loader::after { content: ''; display: inline-block; width: 36px; height: 36px; border: 3px solid #f1f5f9; border-top: 3px solid #4299e1; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* å¾½ç« ç³»ç»Ÿ */
        .badge { display: inline-flex; align-items: center; justify-content: center; width: 22px; height: 22px; border-radius: 50%; font-size: 11px; font-weight: 700; margin-left: 4px; }
        .badge-up { background: linear-gradient(135deg, #6bcf7f, #27ae60); color: white; }
        .badge-down { background: linear-gradient(135deg, #ff6b6b, #ee5a24); color: white; }
    </style>
</head>
<body>
    <div class="container">
        <!-- çŠ¶æ€æ  -->
        <div class="status-bar">
            <div class="status-info">
                <div class="status-item">
                    <div class="status-label">ğŸ“Š å½“å‰è½®æ¬¡</div>
                    <div class="status-value" id="currentRound">1</div>
                </div>
                <div class="status-item">
                    <div class="status-label">ğŸ¯ ä»Šæ—¥è¿›åº¦</div>
                    <div class="status-value" id="todayProgress">0/8</div>
                </div>
                <div class="status-item">
                    <div class="status-label">ğŸ“ æ€»é¢˜æ•°</div>
                    <div class="status-value" id="totalQuestions">0</div>
                </div>
                <div class="status-item">
                    <div class="status-label">âœ… æ­£ç¡®ç‡</div>
                    <div class="status-value" id="accuracyRate">0%</div>
                </div>
            </div>
            <button class="btn btn-secondary btn-small" onclick="showSettings()">
                <span>âš™ï¸</span> è®¾ç½®
            </button>
        </div>
        
        <!-- AIæ•™ç»ƒåŒºåŸŸ -->
        <div class="ai-coach" id="aiCoach">
            <div class="coach-content">
                <div class="coach-header">
                    <div class="coach-avatar">ğŸ‘¨â€ğŸ«</div>
                    <div>
                        <div class="coach-title" id="coachTitle">æ™ºèƒ½å­¦ä¹ æ•™ç»ƒ</div>
                        <div class="coach-message" id="coachMessage">æ­£åœ¨åˆ†æä½ çš„å­¦ä¹ æ•°æ®...</div>
                    </div>
                </div>
                <div class="coach-suggestion" id="coachSuggestion" style="display: none;">
                    <div class="suggestion-title">
                        <span>ğŸ¯ ä»Šæ—¥æ¨è</span>
                        <span class="rec-priority" id="recommendPriority"></span>
                    </div>
                    <div class="suggestion-detail" id="recommendDetail"></div>
                    <div class="suggestion-actions">
                        <button class="btn btn-primary btn-small" onclick="startRecommended()" id="recommendBtn">
                            <span>ğŸš€</span> å¼€å§‹æ¨èæ¨¡å—
                        </button>
                        <button class="btn btn-secondary btn-small" onclick="showAllModules()">
                            <span>ğŸ“š</span> æŸ¥çœ‹æ‰€æœ‰æ¨¡å—
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä»Šæ—¥æ€»ç»“ï¼ˆä¸€è½®å®Œæˆæ—¶æ˜¾ç¤ºï¼‰ -->
        <div class="daily-summary" id="dailySummary" style="display: none;">
            <div class="summary-header">
                <div class="summary-title">ğŸ‰ ä»Šæ—¥ä¸€è½®å·²å®Œæˆï¼</div>
                <div class="summary-date" id="summaryDate"></div>
            </div>
            <div class="summary-grid" id="summaryStats"></div>
            <div style="margin-top: 15px; text-align: center;">
                <button class="btn btn-success" onclick="startNewRound()" style="margin-right: 10px;">
                    <span>ğŸ”„</span> å¼€å§‹æ–°è½®æ¬¡
                </button>
                <button class="btn btn-primary" onclick="reviewWeakModules()">
                    <span>ğŸ“</span> å¤ä¹ è–„å¼±æ¨¡å—
                </button>
            </div>
        </div>
        
        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-content">
            <!-- å·¦ä¾§ï¼šå­¦ä¹ åŒº -->
            <div class="learning-area">
                <!-- è¿›åº¦æ¡ -->
                <div class="progress-container">
                    <div class="progress-header">
                        <div class="progress-label">
                            <span>ğŸ“ˆ æœ¬è½®è¿›åº¦</span>
                            <span id="completedCount">0</span>/<span id="totalCount">8</span>
                        </div>
                        <div class="progress-percent" id="progressPercent">0%</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                    </div>
                </div>
                
                <!-- æ¨¡å—åˆ—è¡¨ -->
                <div class="modules-list">
                    <div class="modules-header">
                        <div class="modules-title">ğŸ“š å­¦ä¹ æ¨¡å—</div>
                        <div class="module-filters">
                            <button class="filter-btn active" onclick="filterModules('all')">å…¨éƒ¨</button>
                            <button class="filter-btn" onclick="filterModules('weak')">è–„å¼±</button>
                            <button class="filter-btn" onclick="filterModules('recommended')">æ¨è</button>
                            <button class="filter-btn" onclick="filterModules('completed')">å·²å®Œæˆ</button>
                        </div>
                    </div>
                    <div id="modulesContainer">
                        <!-- æ¨¡å—ç”±JSåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
            
            <!-- å³ä¾§ï¼šåˆ†æåŒº -->
            <div class="analytics-area">
                <!-- å­¦ä¹ ä»ªè¡¨ç›˜ -->
                <div class="analytics-card">
                    <div class="analytics-title">ğŸ“Š å­¦ä¹ ä»ªè¡¨ç›˜</div>
                    <div class="dashboard-stats">
                        <div class="dashboard-stat">
                            <div class="dashboard-value" id="statTotalRounds">0</div>
                            <div class="dashboard-label">æ€»å®Œæˆè½®æ¬¡</div>
                        </div>
                        <div class="dashboard-stat">
                            <div class="dashboard-value" id="statStreakDays">0</div>
                            <div class="dashboard-label">è¿ç»­å­¦ä¹ </div>
                        </div>
                        <div class="dashboard-stat">
                            <div class="dashboard-value" id="statAvgAccuracy">0%</div>
                            <div class="dashboard-label">å¹³å‡æ­£ç¡®ç‡</div>
                        </div>
                        <div class="dashboard-stat">
                            <div class="dashboard-value" id="statAvgQuestions">0</div>
                            <div class="dashboard-label">å¹³å‡é¢˜é‡/æ¬¡</div>
                        </div>
                    </div>
                </div>
                
                <!-- è–„å¼±æ¨¡å— -->
                <div class="analytics-card">
                    <div class="analytics-title">âš ï¸ è–„å¼±æ¨¡å—</div>
                    <ul id="weakModulesList" style="list-style: none;">
                        <li style="padding: 10px 0; border-bottom: 1px solid #f0f4f8;">
                            <div style="font-size: 14px;">æ­£åœ¨åˆ†æ...</div>
                        </li>
                    </ul>
                </div>
                
                <!-- ä»Šæ—¥å­¦ä¹ å»ºè®® -->
                <div class="analytics-card">
                    <div class="analytics-title">ğŸ’¡ å­¦ä¹ å»ºè®®</div>
                    <div id="learningTips" style="font-size: 13px; line-height: 1.6;">
                        <div style="padding: 8px 0; border-bottom: 1px solid #f0f4f8;">
                            <span style="color: #4299e1; margin-right: 6px;">â€¢</span>
                            <span>ç³»ç»Ÿæ­£åœ¨åˆ†æä½ çš„å­¦ä¹ æ•°æ®...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- åº•éƒ¨æ§åˆ¶æŒ‰é’® -->
        <div style="display: grid; grid-template-columns: repeat(2,1fr); gap: 10px; margin-top: 15px;">
            <button class="btn btn-warning" onclick="showResetModal()">
                <span>ğŸ”„</span> é‡ç½®æœ¬è½®
            </button>
            <button class="btn btn-primary" onclick="showDailyReport()">
                <span>ğŸ“ˆ</span> ä»Šæ—¥æŠ¥å‘Š
            </button>
            <button class="btn btn-secondary" onclick="exportData()">
                <span>ğŸ“¤</span> å¯¼å‡ºæ•°æ®
            </button>
            <button class="btn btn-success" onclick="importData()">
                <span>ğŸ“¥</span> å¯¼å…¥æ•°æ®
            </button>
        </div>
        
        <div class="footer" style="text-align: center; margin-top: 20px; padding: 15px; color: #718096; font-size: 13px;">
            <div>ğŸ’¾ æ•°æ®è‡ªåŠ¨ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­ Â· åˆ·æ–°é¡µé¢ä¸ä¼šä¸¢å¤±</div>
            <div style="font-size: 12px; margin-top: 8px; color: #a0aec0;">å…¬è€ƒæ™ºèƒ½å­¦ä¹ ç³»ç»Ÿ v3.0 | æ™ºèƒ½æ¨è+æ‰‹æœºä¼˜åŒ–</div>
        </div>
    </div>
    
    <!-- æ¨¡å—è¯¦æƒ…å¼¹çª— -->
    <div id="moduleDetailModal" class="modal">
        <div class="modal-content">
            <div class="module-details" id="moduleDetailContent">
                <!-- è¯¦æƒ…ç”±JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeModuleDetail()" style="padding: 12px 30px;">
                    å…³é—­
                </button>
            </div>
        </div>
    </div>
    
    <!-- å®Œæˆç»ƒä¹ å¼¹çª— -->
    <div id="completeModal" class="modal">
        <div class="modal-content">
            <div style="text-align: center; padding: 20px;">
                <div class="loader"></div>
                <div style="margin-top: 15px; color: #718096;">æ­£åœ¨å¤„ç†ç»ƒä¹ æ•°æ®...</div>
            </div>
        </div>
    </div>
    
    <!-- è®¾ç½®å¼¹çª— -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div style="margin-bottom: 20px;">
                <div style="font-size: 20px; font-weight: 700; color: #2c3e50; margin-bottom: 5px;">âš™ï¸ ç³»ç»Ÿè®¾ç½®</div>
                <div style="font-size: 14px; color: #718096;">ä¸ªæ€§åŒ–é…ç½®ä½ çš„å­¦ä¹ ç³»ç»Ÿ</div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div style="font-weight: 600; margin-bottom: 10px; color: #2c3e50;">ğŸ”” æ™ºèƒ½æ¨èè®¾ç½®</div>
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
                    <span>å¯ç”¨æ™ºèƒ½æ¨è</span>
                    <label style="position: relative; display: inline-block; width: 50px; height: 26px;">
                        <input type="checkbox" id="enableRecommendations" checked style="opacity: 0; width: 0; height: 0;">
                        <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;"></span>
                        <span style="position: absolute; content: ""; height: 18px; width: 18px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                    </label>
                </div>
                <div style="font-size: 13px; color: #718096;">ç³»ç»Ÿä¼šæ ¹æ®ä½ çš„è¡¨ç°æ™ºèƒ½æ¨èç»ƒä¹ æ¨¡å—</div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <div style="font-weight: 600; margin-bottom: 10px; color: #2c3e50;">ğŸ’¾ æ•°æ®å¤‡ä»½è®¾ç½®</div>
                <div style="margin-bottom: 10px;">
                    <button class="btn btn-primary btn-small" onclick="createBackup()" style="width: 100%; margin-bottom: 8px;">
                        <span>ğŸ’¾</span> ç«‹å³åˆ›å»ºå¤‡ä»½
                    </button>
                    <div style="font-size: 12px; color: #718096;">ä¸Šæ¬¡å¤‡ä»½ï¼š<span id="lastBackupTime">ä»æœª</span></div>
                </div>
                <div>
                    <button class="btn btn-secondary btn-small" onclick="restoreFromBackup()" style="width: 100%;">
                        <span>â†©ï¸</span> ä»å¤‡ä»½æ¢å¤
                    </button>
                </div>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 25px;">
                <button class="btn btn-success" onclick="saveSettings()" style="flex: 1;">
                    <span>ğŸ’¾</span> ä¿å­˜è®¾ç½®
                </button>
                <button class="btn btn-secondary" onclick="closeSettings()" style="flex: 1;">
                    å…³é—­
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // ============================================
        // å…¬è€ƒæ™ºèƒ½å­¦ä¹ ç³»ç»Ÿ v3.0
        // æ ¸å¿ƒé€»è¾‘
        // ============================================
        
        // å­¦ä¹ æ•°æ®ï¼ˆå¸¦ç‰ˆæœ¬æ§åˆ¶ï¼‰
        const StudySystem = {
            version: '3.0.0',
            data: {
                // ç³»ç»ŸçŠ¶æ€
                currentDate: '',
                currentRound: 1,
                todayCompleted: 0,
                totalRounds: 0,
                
                // æ€»ä½“ç»Ÿè®¡
                overall: {
                    totalQuestions: 0,
                    totalCorrect: 0,
                    streakDays: 0,
                    totalDays: 0,
                    lastStudyDate: '',
                    totalTime: 0,
                    totalSessions: 0,
                    avgQuestionsPerSession: 0,
                },
                
                // æ¨¡å—å®šä¹‰
                modules: [
                    { id: 1, name: "è¨€è¯­ç‰‡æ®µé˜…è¯»", category: "è¨€è¯­ç†è§£", time: 30, questions: 20, desc: "æ¯é¢˜â‰¤10å­—å†™æ ¸å¿ƒè®ºç‚¹", order: 1 },
                    { id: 2, name: "é€»è¾‘åˆ¤æ–­", category: "åˆ¤æ–­æ¨ç†", time: 35, questions: 20, desc: "å†™è®ºè¯ç±»å‹+é€»è¾‘é“¾", order: 2 },
                    { id: 3, name: "èµ„æ–™åˆ†æ", category: "èµ„æ–™åˆ†æ", time: 35, questions: 20, desc: "å£è¿°æœ€éš¾è®¡ç®—æ€è·¯", order: 3 },
                    { id: 4, name: "è¨€è¯­å¡«ç©º", category: "è¨€è¯­ç†è§£", time: 30, questions: 20, desc: "è®°å½•çŠ¹è±«é€‰é¡¹å¹¶è¾¨æ", order: 4 },
                    { id: 5, name: "å›¾å½¢æ¨ç†", category: "åˆ¤æ–­æ¨ç†", time: 25, questions: 20, desc: "æ³¨é”™/æ…¢é¢˜'æ­»åœ¨ä½•æ­¥'", order: 5 },
                    { id: 6, name: "å®šä¹‰åˆ¤æ–­", category: "åˆ¤æ–­æ¨ç†", time: 25, questions: 20, desc: "å…ˆè‡ªè¯é‡è¿°å®šä¹‰", order: 6 },
                    { id: 7, name: "ç±»æ¯”æ¨ç†", category: "åˆ¤æ–­æ¨ç†", time: 20, questions: 20, desc: "é”™é¢˜åå‘æ„é€ ä¾‹å­", order: 7 },
                    { id: 8, name: "ç»ˆæä»»åŠ¡", category: "ç»¼åˆè®­ç»ƒ", time: 60, questions: 1, desc: "ç”³è®º/é”™æ€/ä½“èƒ½ä¸‰é€‰ä¸€", order: 8 }
                ],
                
                // æ¨¡å—ç»Ÿè®¡
                moduleStats: {},
                
                // æ¯æ—¥è®°å½•
                daily: {
                    date: '',
                    completed: [],
                    startTime: Date.now(),
                    totalTime: 0,
                    sessions: []
                },
                
                // é…ç½®
                config: {
                    enableRecommendations: true,
                    enableBackup: true,
                    lastBackup: null
                }
            },
            
            // å½“å‰æ¨èçš„æ¨¡å—
            currentRecommendation: null,
            
            // åˆå§‹åŒ–
            init() {
                console.log('ğŸš€ å…¬è€ƒæ™ºèƒ½å­¦ä¹ ç³»ç»Ÿ v3.0 å¯åŠ¨');
                this.loadData();
                this.checkNewDay();
                this.initModuleStats();
                this.updateRecommendation();
                this.updateDisplay();
                this.setupEventListeners();
                
                // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
                setTimeout(() => {
                    this.showNotification('æ¬¢è¿ä½¿ç”¨ v3.0', 'æ™ºèƒ½æ¨èç³»ç»Ÿå·²å°±ç»ªï¼');
                }, 1000);
            },
            
            // åŠ è½½æ•°æ®
            loadData() {
                const saved = localStorage.getItem('studyData_v3');
                if (saved) {
                    try {
                        const loaded = JSON.parse(saved);
                        // åˆå¹¶æ•°æ®ï¼Œä¿ç•™æ–°ç‰ˆæœ¬çš„ç»“æ„
                        this.mergeData(loaded);
                        console.log('âœ… æ•°æ®åŠ è½½æˆåŠŸ');
                    } catch (e) {
                        console.error('âŒ æ•°æ®åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®', e);
                    }
                }
            },
            
            // åˆå¹¶æ•°æ®ï¼ˆæ™ºèƒ½å‡çº§ï¼‰
            mergeData(loaded) {
                // åŸºç¡€æ•°æ®åˆå¹¶
                Object.keys(this.data).forEach(key => {
                    if (loaded[key] !== undefined) {
                        if (typeof this.data[key] === 'object' && this.data[key] !== null) {
                            Object.assign(this.data[key], loaded[key]);
                        } else {
                            this.data[key] = loaded[key];
                        }
                    }
                });
                
                // ç¡®ä¿é…ç½®å­˜åœ¨
                if (!this.data.config) {
                    this.data.config = { enableRecommendations: true, enableBackup: true, lastBackup: null };
                }
            },
            
            // ä¿å­˜æ•°æ®
            saveData() {
                try {
                    localStorage.setItem('studyData_v3', JSON.stringify(this.data));
                    return true;
                } catch (e) {
                    console.error('âŒ æ•°æ®ä¿å­˜å¤±è´¥', e);
                    this.showNotification('ä¿å­˜å¤±è´¥', 'å¯èƒ½æ˜¯å­˜å‚¨ç©ºé—´ä¸è¶³', 'error');
                    return false;
                }
            },
            
            // åˆå§‹åŒ–æ¨¡å—ç»Ÿè®¡
            initModuleStats() {
                this.data.modules.forEach(module => {
                    if (!this.data.moduleStats[module.id]) {
                        this.data.moduleStats[module.id] = {
                            attempts: 0,
                            totalQuestions: 0,
                            totalCorrect: 0,
                            bestAccuracy: 0,
                            lastAccuracy: 0,
                            history: [],
                            lastPracticeDate: '',
                            streak: 0,
                            avgQuestions: module.questions
                        };
                    }
                });
            },
            
            // æ£€æŸ¥æ–°çš„ä¸€å¤©
            checkNewDay() {
                const today = this.getTodayDate();
                
                if (this.data.currentDate !== today) {
                    console.log('ğŸ“… æ–°çš„ä¸€å¤©å¼€å§‹');
                    
                    // æ›´æ–°æ—¥æœŸ
                    this.data.currentDate = today;
                    this.data.daily.date = today;
                    this.data.daily.startTime = Date.now();
                    
                    // æ£€æŸ¥è¿ç»­å­¦ä¹ 
                    const yesterday = this.getYesterdayDate();
                    if (this.data.overall.lastStudyDate === yesterday) {
                        this.data.overall.streakDays++;
                    } else if (this.data.overall.lastStudyDate !== today) {
                        this.data.overall.streakDays = 1;
                    }
                    
                    this.data.overall.lastStudyDate = today;
                    this.data.overall.totalDays++;
                    
                    // æ–°çš„ä¸€å¤©ï¼šä¸æ¸…ç©ºå·²å®Œæˆï¼Œä½†é‡ç½®sessions
                    this.data.daily.sessions = [];
                    
                    this.saveData();
                }
            },
            
            // æ™ºèƒ½æ¨èä¸‹ä¸€ä¸ªæ¨¡å—
            updateRecommendation() {
                if (!this.data.config.enableRecommendations) {
                    this.currentRecommendation = null;
                    return;
                }
                
                const uncompleted = this.data.modules.filter(
                    module => !this.data.daily.completed.includes(module.id)
                );
                
                if (uncompleted.length === 0) {
                    // æ‰€æœ‰æ¨¡å—éƒ½å·²å®Œæˆä¸€è½®ï¼Œæ¨èè–„å¼±æ¨¡å—
                    this.currentRecommendation = this.getWeakestModule();
                    return;
                }
                
                // è®¡ç®—æ¯ä¸ªæ¨¡å—çš„æ¨èåˆ†æ•°
                const scored = uncompleted.map(module => {
                    const stats = this.data.moduleStats[module.id];
                    let score = 0;
                    
                    // 1. è–„å¼±ç¨‹åº¦ï¼ˆæ­£ç¡®ç‡è¶Šä½åˆ†æ•°è¶Šé«˜ï¼‰
                    if (stats.attempts > 0) {
                        const accuracy = stats.totalCorrect / stats.totalQuestions;
                        score += (1 - accuracy) * 100 * 0.6;
                    } else {
                        score += 50; // æ–°æ¨¡å—
                    }
                    
                    // 2. æœ€è¿‘ç»ƒä¹ æ—¶é—´ï¼ˆè¶Šä¹…æœªç»ƒåˆ†æ•°è¶Šé«˜ï¼‰
                    if (stats.lastPracticeDate) {
                        const daysSince = Math.floor((Date.now() - new Date(stats.lastPracticeDate).getTime()) / (1000 * 60 * 60 * 24));
                        score += Math.min(daysSince * 10, 50) * 0.3;
                    } else {
                        score += 30; // ä»æœªç»ƒä¹ 
                    }
                    
                    // 3. å…³è”æ¨èï¼ˆå¦‚æœå…¶ä»–æ¨¡å—å·²å®Œæˆï¼‰
                    const relatedCompleted = this.getRelatedCompleted(module.category);
                    score += relatedCompleted * 0.1;
                    
                    return { module, score, stats };
                });
                
                // æŒ‰åˆ†æ•°æ’åº
                scored.sort((a, b) => b.score - a.score);
                this.currentRecommendation = scored[0];
            },
            
            // è·å–æœ€è–„å¼±æ¨¡å—
            getWeakestModule() {
                let weakest = null;
                let lowestAccuracy = 100;
                
                this.data.modules.forEach(module => {
                    const stats = this.data.moduleStats[module.id];
                    if (stats && stats.attempts > 0) {
                        const accuracy = (stats.totalCorrect / stats.totalQuestions) * 100;
                        if (accuracy < lowestAccuracy) {
                            lowestAccuracy = accuracy;
                            weakest = { module, stats };
                        }
                    }
                });
                
                return weakest;
            },
            
            // è·å–ç›¸å…³å®Œæˆåº¦
            getRelatedCompleted(category) {
                const sameCategory = this.data.modules.filter(m => m.category === category);
                const completed = sameCategory.filter(m => this.data.daily.completed.includes(m.id)).length;
                return (completed / sameCategory.length) * 100;
            },
            
            // è·å–ä»Šæ—¥å»ºè®®
            getTodaySuggestion() {
                const completed = this.data.daily.completed.length;
                const total = this.data.modules.length;
                
                // æƒ…å†µ1ï¼šæ‰€æœ‰æ¨¡å—éƒ½å·²å®Œæˆä¸€è½®
                if (completed >= total) {
                    if (this.currentRecommendation) {
                        return {
                            type: 'round_complete',
                            title: 'ğŸ‰ ä»Šæ—¥ä¸€è½®å·²å®Œæˆï¼',
                            message: 'æ‰€æœ‰æ¨¡å—å‡å·²é€šå…³ï¼Œå»ºè®®é‡å¤ç»ƒä¹ è–„å¼±æ¨¡å—åŠ å¼ºå·©å›º',
                            detail: `æ¨èï¼š${this.currentRecommendation.module.name}`,
                            priority: 'é«˜ä¼˜å…ˆçº§',
                            action: 'review_weak'
                        };
                    }
                    return {
                        type: 'round_complete_no_weak',
                        title: 'ğŸŠ å®Œç¾ï¼',
                        message: 'æ‰€æœ‰æ¨¡å—å‡è¡¨ç°è‰¯å¥½ï¼Œå¯å¼€å§‹æ–°è½®æ¬¡æˆ–ä¼‘æ¯',
                        priority: 'å·²å®Œæˆ',
                        action: 'new_round'
                    };
                }
                
                // æƒ…å†µ2ï¼šæœ‰æ¨èæ¨¡å—
                if (this.currentRecommendation) {
                    const stats = this.currentRecommendation.stats;
                    let reason = '';
                    
                    if (stats.attempts === 0) {
                        reason = 'æ–°æ¨¡å—ï¼Œå»ºè®®å°½æ—©å¼€å§‹';
                    } else {
                        const accuracy = (stats.totalCorrect / stats.totalQuestions * 100).toFixed(1);
                        if (accuracy < 65) reason = `è–„å¼±æ¨¡å—ï¼ˆ${accuracy}%ï¼‰ï¼Œéœ€è¦é‡ç‚¹çªç ´`;
                        else if (accuracy < 75) reason = `éœ€åŠ å¼ºï¼ˆ${accuracy}%ï¼‰ï¼Œå»ºè®®å·©å›º`;
                        else if (accuracy < 85) reason = `è‰¯å¥½ï¼ˆ${accuracy}%ï¼‰ï¼Œä¿æŒçŠ¶æ€`;
                        else reason = `ä¼˜ç§€ï¼ˆ${accuracy}%ï¼‰ï¼Œä¿æŒæ‰‹æ„Ÿ`;
                    }
                    
                    return {
                        type: 'recommendation',
                        title: 'ğŸ¯ ä»Šæ—¥æ¨è',
                        message: this.currentRecommendation.module.name,
                        detail: reason,
                        priority: 'æ¨è',
                        action: 'start_recommended'
                    };
                }
                
                // æƒ…å†µ3ï¼šé»˜è®¤
                return {
                    type: 'default',
                    title: 'ğŸ‘¨â€ğŸ« æ™ºèƒ½æ•™ç»ƒ',
                    message: 'å‡†å¤‡å¥½å¼€å§‹ä»Šå¤©çš„å­¦ä¹ äº†å—ï¼Ÿ',
                    detail: 'ç³»ç»Ÿä¼šæ ¹æ®ä½ çš„è¡¨ç°æ™ºèƒ½æ¨èç»ƒä¹ å†…å®¹',
                    priority: '',
                    action: 'show_modules'
                };
            },
            
            // æ›´æ–°æ˜¾ç¤º
            updateDisplay() {
                this.updateStatusBar();
                this.updateProgressBar();
                this.updateModuleList();
                this.updateAnalytics();
                this.updateCoachMessage();
                this.saveData();
            },
            
            // æ›´æ–°çŠ¶æ€æ 
            updateStatusBar() {
                document.getElementById('currentRound').textContent = this.data.currentRound;
                
                const completed = this.data.daily.completed.length;
                const total = this.data.modules.length;
                document.getElementById('todayProgress').textContent = `${completed}/${total}`;
                
                document.getElementById('totalQuestions').textContent = this.data.overall.totalQuestions;
                
                const accuracy = this.data.overall.totalQuestions > 0 ? 
                    ((this.data.overall.totalCorrect / this.data.overall.totalQuestions) * 100).toFixed(1) : 0;
                document.getElementById('accuracyRate').textContent = `${accuracy}%`;
            },
            
            // æ›´æ–°è¿›åº¦æ¡
            updateProgressBar() {
                const completed = this.data.daily.completed.length;
                const total = this.data.modules.length;
                const percent = total > 0 ? (completed / total * 100) : 0;
                
                document.getElementById('completedCount').textContent = completed;
                document.getElementById('totalCount').textContent = total;
                document.getElementById('progressPercent').textContent = `${Math.round(percent)}%`;
                document.getElementById('progressBar').style.width = `${percent}%`;
                
                // æ˜¾ç¤º/éšè—ä»Šæ—¥æ€»ç»“
                const summaryEl = document.getElementById('dailySummary');
                if (completed >= total) {
                    this.showDailySummary();
                    summaryEl.style.display = 'block';
                } else {
                    summaryEl.style.display = 'none';
                }
            },
            
            // æ˜¾ç¤ºä»Šæ—¥æ€»ç»“
            showDailySummary() {
                document.getElementById('summaryDate').textContent = this.formatDate(new Date());
                
                const statsHtml = `
                    <div class="summary-item">
                        <div class="summary-value">${this.data.daily.completed.length}</div>
                        <div class="summary-label">å®Œæˆæ¨¡å—</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value">${this.getTodayQuestions()}</div>
                        <div class="summary-label">æ€»ç»ƒä¹ é¢˜æ•°</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value">${this.getTodayAccuracy()}%</div>
                        <div class="summary-label">å¹³å‡æ­£ç¡®ç‡</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value">${this.formatTime(this.data.daily.totalTime)}</div>
                        <div class="summary-label">å­¦ä¹ æ—¶é•¿</div>
                    </div>
                `;
                
                document.getElementById('summaryStats').innerHTML = statsHtml;
            },
            
            // æ›´æ–°æ¨¡å—åˆ—è¡¨
            updateModuleList() {
                const container = document.getElementById('modulesContainer');
                const filter = document.querySelector('.filter-btn.active')?.getAttribute('onclick')?.match(/'([^']+)'/)?.[1] || 'all';
                
                container.innerHTML = '';
                
                this.data.modules.forEach((module, index) => {
                    const stats = this.data.moduleStats[module.id];
                    const isCompleted = this.data.daily.completed.includes(module.id);
                    const isRecommended = this.currentRecommendation?.module?.id === module.id;
                    const accuracy = stats.attempts > 0 ? (stats.totalCorrect / stats.totalQuestions * 100) : 0;
                    const isWeak = stats.attempts > 0 && accuracy < 65;
                    
                    // åº”ç”¨è¿‡æ»¤
                    let show = true;
                    switch(filter) {
                        case 'weak': show = isWeak && !isCompleted; break;
                        case 'recommended': show = isRecommended; break;
                        case 'completed': show = isCompleted; break;
                    }
                    if (!show) return;
                    
                    // è¶‹åŠ¿è®¡ç®—
                    let trendBadge = '';
                    if (stats.history.length >= 2) {
                        const recent = stats.history.slice(-2);
                        const trend = recent[1].accuracy - recent[0].accuracy;
                        if (Math.abs(trend) > 2) {
                            trendBadge = `<span class="badge ${trend > 0 ? 'badge-up' : 'badge-down'}">${trend > 0 ? 'â†‘' : 'â†“'}${Math.abs(trend).toFixed(1)}%</span>`;
                        }
                    }
                    
                    // æ¨¡å—æç¤º
                    let hint = '';
                    if (stats.attempts === 0) {
                        hint = 'æ–°æ¨¡å—ï¼Œå»ºè®®å°½æ—©å¼€å§‹';
                    } else {
                        if (accuracy < 65) hint = `è–„å¼±ï¼ˆ${accuracy.toFixed(1)}%ï¼‰ï¼Œéœ€è¦åŠ å¼º`;
                        else if (accuracy < 75) hint = `éœ€å·©å›ºï¼ˆ${accuracy.toFixed(1)}%ï¼‰ï¼Œå»ºè®®ç»ƒä¹ `;
                        else if (accuracy < 85) hint = `è‰¯å¥½ï¼ˆ${accuracy.toFixed(1)}%ï¼‰ï¼Œä¿æŒçŠ¶æ€`;
                        else hint = `ä¼˜ç§€ï¼ˆ${accuracy.toFixed(1)}%ï¼‰ï¼Œå¯å‡å°‘é¢˜é‡`;
                    }
                    
                    const moduleEl = document.createElement('div');
                    moduleEl.className = `module-item ${isCompleted ? 'completed' : ''} ${isRecommended ? 'recommended' : ''} ${isWeak ? 'weak' : ''}`;
                    moduleEl.innerHTML = `
                        <div class="module-number">${index + 1}</div>
                        <div class="module-content">
                            <div class="module-header">
                                <div class="module-title">${module.name} ${trendBadge}</div>
                                ${isRecommended ? '<div class="module-badge">â­ æ¨è</div>' : ''}
                            </div>
                            <div class="module-meta">
                                <span>ğŸ“ ${module.questions}é¢˜</span>
                                <span>â±ï¸ ${module.time}åˆ†é’Ÿ</span>
                                <span>ğŸ·ï¸ ${module.category}</span>
                            </div>
                            <div class="module-hint">${hint}</div>
                            ${stats.attempts > 0 ? `
                                <div class="module-stats">
                                    <div class="stat-badge ${accuracy < 65 ? 'highlight' : ''}">
                                        <span>âœ…</span> æ­£ç¡®ç‡ï¼š${accuracy.toFixed(1)}%
                                    </div>
                                    <div class="stat-badge">
                                        <span>ğŸ“Š</span> ç»ƒä¹ ï¼š${stats.attempts}æ¬¡
                                    </div>
                                </div>
                            ` : ''}
                            <div class="module-actions">
                                <button class="btn ${isCompleted ? 'btn-primary' : 'btn-success'}" 
                                        onclick="StudySystem.startModule(${index})"
                                        data-module-index="${index}">
                                    <span>${isCompleted ? 'ğŸ”„' : 'âœ…'}</span>
                                    ${isCompleted ? 'å†æ¬¡ç»ƒä¹ ' : 'å¼€å§‹ç»ƒä¹ '}
                                </button>
                                <button class="btn btn-secondary" onclick="StudySystem.showModuleDetails(${index})">
                                    <span>ğŸ“Š</span> è¯¦æƒ…
                                </button>
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(moduleEl);
                });
                
                if (container.children.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 40px; color: #a0aec0;">
                            <div style="font-size: 40px; margin-bottom: 15px;">ğŸ“­</div>
                            <div style="font-size: 15px;">æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æ¨¡å—</div>
                        </div>
                    `;
                }
            },
            
            // æ›´æ–°åˆ†æé¢æ¿
            updateAnalytics() {
                // ä»ªè¡¨ç›˜
                document.getElementById('statTotalRounds').textContent = this.data.totalRounds;
                document.getElementById('statStreakDays').textContent = this.data.overall.streakDays;
                
                const avgAccuracy = this.data.overall.totalQuestions > 0 ? 
                    (this.data.overall.totalCorrect / this.data.overall.totalQuestions * 100).toFixed(1) : 0;
                document.getElementById('statAvgAccuracy').textContent = `${avgAccuracy}%`;
                
                const avgQuestions = this.data.overall.totalSessions > 0 ? 
                    Math.round(this.data.overall.totalQuestions / this.data.overall.totalSessions) : 0;
                document.getElementById('statAvgQuestions').textContent = avgQuestions;
                
                // è–„å¼±æ¨¡å—
                this.updateWeakModules();
                
                // å­¦ä¹ å»ºè®®
                this.updateLearningTips();
            },
            
            // æ›´æ–°è–„å¼±æ¨¡å—åˆ—è¡¨
            updateWeakModules() {
                const container = document.getElementById('weakModulesList');
                const weakModules = [];
                
                this.data.modules.forEach(module => {
                    const stats = this.data.moduleStats[module.id];
                    if (stats && stats.attempts > 0) {
                        const accuracy = (stats.totalCorrect / stats.totalQuestions) * 100;
                        if (accuracy < 65) {
                            weakModules.push({ module, accuracy });
                        }
                    }
                });
                
                weakModules.sort((a, b) => a.accuracy - b.accuracy);
                
                if (weakModules.length === 0) {
                    container.innerHTML = `
                        <li style="padding: 10px 0; border-bottom: 1px solid #f0f4f8;">
                            <div style="font-size: 14px;">ğŸ‰ æš‚æ— è–„å¼±æ¨¡å—</div>
                            <div style="font-size: 12px; color: #718096;">ç»§ç»­ä¿æŒè‰¯å¥½çŠ¶æ€ï¼</div>
                        </li>
                    `;
                    return;
                }
                
                let html = '';
                weakModules.slice(0, 3).forEach(item => {
                    html += `
                        <li style="padding: 10px 0; border-bottom: 1px solid #f0f4f8; display: flex; justify-content: space-between; align-items: center;">
                            <div style="font-size: 14px;">${item.module.name}</div>
                            <div>
                                <span style="font-weight: 700; color: #e53e3e;">${item.accuracy.toFixed(1)}%</span>
                                <span style="font-size: 10px; padding: 2px 6px; background: #ffeaea; color: #e53e3e; border-radius: 8px; margin-left: 6px;">éœ€åŠ å¼º</span>
                            </div>
                        </li>
                    `;
                });
                
                container.innerHTML = html;
            },
            
            // æ›´æ–°å­¦ä¹ å»ºè®®
            updateLearningTips() {
                const container = document.getElementById('learningTips');
                const tips = [];
                
                // æ£€æŸ¥è–„å¼±æ¨¡å—
                let weakCount = 0;
                this.data.modules.forEach(module => {
                    const stats = this.data.moduleStats[module.id];
                    if (stats && stats.attempts > 0) {
                        const accuracy = (stats.totalCorrect / stats.totalQuestions) * 100;
                        if (accuracy < 65) weakCount++;
                    }
                });
                
                if (weakCount > 0) {
                    tips.push(`å‘ç°${weakCount}ä¸ªè–„å¼±æ¨¡å—ï¼Œå»ºè®®é‡ç‚¹ç»ƒä¹ `);
                }
                
                // æ£€æŸ¥è¿ç»­å­¦ä¹ 
                if (this.data.overall.streakDays >= 7) {
                    tips.push(`å·²è¿ç»­å­¦ä¹ ${this.data.overall.streakDays}å¤©ï¼Œç»§ç»­ä¿æŒï¼`);
                }
                
                // æ£€æŸ¥ä»Šæ—¥è¿›åº¦
                const completed = this.data.daily.completed.length;
                const total = this.data.modules.length;
                if (completed === 0) {
                    tips.push('ä»Šå¤©å°šæœªå¼€å§‹å­¦ä¹ ï¼Œå»ºè®®è‡³å°‘å®Œæˆ1ä¸ªæ¨¡å—');
                } else if (completed < total / 2) {
                    tips.push(`å·²å®Œæˆ${completed}/${total}ï¼Œå»ºè®®ç»§ç»­å®Œæˆ${Math.ceil(total/2) - completed}ä¸ªæ¨¡å—`);
                }
                
                if (tips.length === 0) {
                    tips.push('ä¿æŒå½“å‰å­¦ä¹ èŠ‚å¥ï¼Œç¨³æ­¥æå‡');
                    tips.push('å»ºè®®æ¯å¤©è‡³å°‘å®Œæˆ3-4ä¸ªæ¨¡å—');
                    tips.push('æ³¨æ„åŠ³é€¸ç»“åˆï¼Œåˆç†å®‰æ’ä¼‘æ¯');
                }
                
                let html = '';
                tips.forEach(tip => {
                    html += `
                        <div style="padding: 8px 0; border-bottom: 1px solid #f0f4f8;">
                            <span style="color: #4299e1; margin-right: 6px;">â€¢</span>
                            <span>${tip}</span>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
            },
            
            // æ›´æ–°æ•™ç»ƒæ¶ˆæ¯
            updateCoachMessage() {
                const suggestion = this.getTodaySuggestion();
                
                document.getElementById('coachTitle').textContent = suggestion.title;
                document.getElementById('coachMessage').textContent = suggestion.message;
                
                const suggestionEl = document.getElementById('coachSuggestion');
                const detailEl = document.getElementById('recommendDetail');
                const priorityEl = document.getElementById('recommendPriority');
                const btnEl = document.getElementById('recommendBtn');
                
                if (suggestion.type === 'default') {
                    suggestionEl.style.display = 'none';
                } else {
                    suggestionEl.style.display = 'block';
                    detailEl.textContent = suggestion.detail;
                    priorityEl.textContent = suggestion.priority;
                    
                    if (suggestion.type === 'round_complete') {
                        btnEl.innerHTML = '<span>ğŸ“</span> å¤ä¹ è–„å¼±æ¨¡å—';
                        btnEl.onclick = () => this.startModule(this.data.modules.findIndex(m => m.id === this.currentRecommendation.module.id));
                    } else if (suggestion.type === 'round_complete_no_weak') {
                        btnEl.innerHTML = '<span>ğŸ”„</span> å¼€å§‹æ–°è½®æ¬¡';
                        btnEl.onclick = this.startNewRound;
                    } else {
                        btnEl.innerHTML = '<span>ğŸš€</span> å¼€å§‹æ¨èæ¨¡å—';
                        btnEl.onclick = this.startRecommended;
                    }
                }
            },
            
            // å¼€å§‹æ¨¡å—ç»ƒä¹ 
            startModule(index) {
                const module = this.data.modules[index];
                this.showModuleCompleteDialog(module, index);
            },
            
            // æ˜¾ç¤ºæ¨¡å—å®Œæˆå¯¹è¯æ¡†
            showModuleCompleteDialog(module, index) {
                const isRepeated = this.data.daily.completed.includes(module.id);
                const stats = this.data.moduleStats[module.id];
                
                // è¿™é‡Œå¯ä»¥æ‰©å±•ä¸ºå®Œæ•´çš„å®Œæˆå¯¹è¯æ¡†
                // ç›®å‰ç®€åŒ–å¤„ç†ï¼šç›´æ¥å®Œæˆ
                const practiceQuestions = module.questions;
                const wrongCount = Math.floor(practiceQuestions * (1 - 0.7)); // æ¨¡æ‹Ÿ30%é”™è¯¯ç‡
                
                this.completeModule(module.id, practiceQuestions, wrongCount, '', isRepeated);
                
                this.showNotification(
                    isRepeated ? 'é‡å¤ç»ƒä¹ å®Œæˆ' : 'æ¨¡å—å®Œæˆ',
                    `${module.name} ${isRepeated ? 'é‡å¤ç»ƒä¹ ' : 'ç»ƒä¹ '}å®Œæˆï¼`,
                    'success'
                );
            },
            
            // å®Œæˆæ¨¡å—
            completeModule(moduleId, practiceQuestions, wrongCount, note = '', isRepeated = false) {
                const module = this.data.modules.find(m => m.id === moduleId);
                const stats = this.data.moduleStats[moduleId];
                
                const correctCount = practiceQuestions - wrongCount;
                const accuracy = (correctCount / practiceQuestions) * 100;
                const practiceTime = module.time; // ç®€åŒ–ï¼šä½¿ç”¨é¢„è®¾æ—¶é—´
                
                // æ›´æ–°æ¨¡å—ç»Ÿè®¡
                stats.attempts++;
                stats.totalQuestions += practiceQuestions;
                stats.totalCorrect += correctCount;
                stats.lastAccuracy = accuracy;
                stats.bestAccuracy = Math.max(stats.bestAccuracy, accuracy);
                stats.lastPracticeDate = new Date().toISOString();
                stats.avgQuestions = stats.totalQuestions / stats.attempts;
                
                stats.history.push({
                    date: this.data.currentDate,
                    practiceQuestions,
                    wrongCount,
                    accuracy,
                    note,
                    timeSpent: practiceTime,
                    isRepeated
                });
                
                // æ›´æ–°æ€»ä½“ç»Ÿè®¡
                this.data.overall.totalQuestions += practiceQuestions;
                this.data.overall.totalCorrect += correctCount;
                this.data.overall.totalTime += practiceTime;
                this.data.overall.totalSessions++;
                this.data.overall.avgQuestionsPerSession = this.data.overall.totalQuestions / this.data.overall.totalSessions;
                
                // æ›´æ–°æ¯æ—¥è®°å½•
                this.data.daily.totalTime += practiceTime;
                this.data.daily.sessions.push({
                    moduleId,
                    moduleName: module.name,
                    practiceQuestions,
                    wrongCount,
                    accuracy,
                    timeSpent: practiceTime,
                    timestamp: Date.now(),
                    isRepeated
                });
                
                // å¦‚æœæ˜¯é¦–æ¬¡å®Œæˆï¼ŒåŠ å…¥completedåˆ—è¡¨
                if (!isRepeated && !this.data.daily.completed.includes(moduleId)) {
                    this.data.daily.completed.push(moduleId);
                    this.data.todayCompleted++;
                }
                
                // æ£€æŸ¥æ˜¯å¦å®Œæˆä¸€è½®
                if (this.data.daily.completed.length >= this.data.modules.length) {
                    this.data.currentRound++;
                    this.data.totalRounds++;
                    
                    // ä¸€è½®å®Œæˆï¼Œä½†ä¸æ¸…ç©ºcompletedï¼Œå…è®¸é‡å¤ç»ƒä¹ 
                    this.showNotification('ğŸ‰ æ­å–œï¼', `å®Œæˆç¬¬${this.data.currentRound-1}è½®å­¦ä¹ ï¼`, 'success');
                }
                
                // æ›´æ–°æ¨è
                this.updateRecommendation();
                this.updateDisplay();
            },
            
            // æ˜¾ç¤ºæ¨¡å—è¯¦æƒ…
            showModuleDetails(index) {
                const module = this.data.modules[index];
                const stats = this.data.moduleStats[module.id];
                
                const accuracy = stats.attempts > 0 ? (stats.totalCorrect / stats.totalQuestions * 100).toFixed(1) : 0;
                const bestAccuracy = stats.bestAccuracy.toFixed(1);
                const avgQuestions = stats.avgQuestions ? stats.avgQuestions.toFixed(0) : module.questions;
                
                let historyHtml = '<div style="margin-top: 15px; font-weight: 600;">æœ€è¿‘ç»ƒä¹ è®°å½•ï¼š</div>';
                if (stats.history.length === 0) {
                    historyHtml += '<div style="font-size: 13px; color: #718096; margin-top: 8px;">æš‚æ— ç»ƒä¹ è®°å½•</div>';
                } else {
                    stats.history.slice(-3).reverse().forEach(record => {
                        historyHtml += `
                            <div style="font-size: 13px; padding: 8px; background: #f8fafc; border-radius: 6px; margin-top: 6px;">
                                <div>${this.formatDate(new Date(record.date))} - ${record.practiceQuestions}é¢˜</div>
                                <div>æ­£ç¡®ç‡ï¼š${record.accuracy.toFixed(1)}% (é”™${record.wrongCount}é¢˜)</div>
                                ${record.note ? `<div style="color: #666; margin-top: 4px;">ğŸ“ ${record.note}</div>` : ''}
                            </div>
                        `;
                    });
                }
                
                const detailHtml = `
                    <div class="detail-header">
                        <div class="detail-title">${module.name}</div>
                        <div class="detail-category">${module.category}</div>
                    </div>
                    
                    <div style="margin-bottom: 15px; font-size: 14px; color: #4a5568;">
                        ${module.desc}
                    </div>
                    
                    <div class="detail-stats-grid">
                        <div class="detail-stat">
                            <div class="detail-stat-value">${stats.attempts}</div>
                            <div class="detail-stat-label">ç»ƒä¹ æ¬¡æ•°</div>
                        </div>
                        <div class="detail-stat">
                            <div class="detail-stat-value">${accuracy}%</div>
                            <div class="detail-stat-label">å¹³å‡æ­£ç¡®ç‡</div>
                        </div>
                        <div class="detail-stat">
                            <div class="detail-stat-value">${bestAccuracy}%</div>
                            <div class="detail-stat-label">æœ€ä½³æ­£ç¡®ç‡</div>
                        </div>
                        <div class="detail-stat">
                            <div class="detail-stat-value">${avgQuestions}</div>
                            <div class="detail-stat-label">å¹³å‡é¢˜é‡/æ¬¡</div>
                        </div>
                    </div>
                    
                    ${historyHtml}
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <button class="btn btn-success" onclick="StudySystem.startModule(${index})" style="margin-right: 10px;">
                            <span>${this.data.daily.completed.includes(module.id) ? 'ğŸ”„' : 'âœ…'}</span>
                            ${this.data.daily.completed.includes(module.id) ? 'å†æ¬¡ç»ƒä¹ ' : 'å¼€å§‹ç»ƒä¹ '}
                        </button>
                        <button class="btn btn-secondary" onclick="StudySystem.closeModuleDetail()">
                            å…³é—­
                        </button>
                    </div>
                `;
                
                document.getElementById('moduleDetailContent').innerHTML = detailHtml;
                document.getElementById('moduleDetailModal').style.display = 'flex';
            },
            
            // å…³é—­æ¨¡å—è¯¦æƒ…
            closeModuleDetail() {
                document.getElementById('moduleDetailModal').style.display = 'none';
            },
            
            // å¼€å§‹æ¨èæ¨¡å—
            startRecommended() {
                if (this.currentRecommendation) {
                    const index = this.data.modules.findIndex(m => m.id === this.currentRecommendation.module.id);
                    this.startModule(index);
                }
            },
            
            // å¼€å§‹æ–°è½®æ¬¡
            startNewRound() {
                if (confirm('å¼€å§‹æ–°è½®æ¬¡å°†é‡ç½®ä»Šæ—¥å®ŒæˆçŠ¶æ€ï¼Œä½†ä¿ç•™ç»ƒä¹ è®°å½•ã€‚ç¡®å®šå¼€å§‹æ–°è½®æ¬¡å—ï¼Ÿ')) {
                    this.data.daily.completed = [];
                    this.data.todayCompleted = 0;
                    this.data.currentModuleIndex = 0;
                    this.updateRecommendation();
                    this.updateDisplay();
                    this.showNotification('æ–°è½®æ¬¡å¼€å§‹', 'åŠ æ²¹å®Œæˆæ–°ä¸€è½®å­¦ä¹ ï¼');
                }
            },
            
            // å¤ä¹ è–„å¼±æ¨¡å—
            reviewWeakModules() {
                const weakModule = this.getWeakestModule();
                if (weakModule) {
                    const index = this.data.modules.findIndex(m => m.id === weakModule.module.id);
                    this.startModule(index);
                }
            },
            
            // æ˜¾ç¤ºä»Šæ—¥æŠ¥å‘Š
            showDailyReport() {
                const completed = this.data.daily.completed.length;
                const total = this.data.modules.length;
                const todayQuestions = this.getTodayQuestions();
                const todayAccuracy = this.getTodayAccuracy();
                
                alert(`ğŸ“Š ä»Šæ—¥å­¦ä¹ æŠ¥å‘Š\n\nâœ… å®Œæˆæ¨¡å—ï¼š${completed}/${total}\nğŸ“ ç»ƒä¹ é¢˜æ•°ï¼š${todayQuestions}\nğŸ¯ æ­£ç¡®ç‡ï¼š${todayAccuracy}%\nâ±ï¸ å­¦ä¹ æ—¶é•¿ï¼š${this.formatTime(this.data.daily.totalTime)}\nğŸ”¥ è¿ç»­å­¦ä¹ ï¼š${this.data.overall.streakDays}å¤©`);
            },
            
            // å¯¼å‡ºæ•°æ®
            exportData() {
                const dataStr = JSON.stringify(this.data, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `å…¬è€ƒå­¦ä¹ æ•°æ®_${this.getTodayDate()}_v3.0.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                setTimeout(() => URL.revokeObjectURL(url), 100);
                this.showNotification('å¯¼å‡ºæˆåŠŸ', 'å­¦ä¹ æ•°æ®å·²å¯¼å‡ºä¸ºJSONæ–‡ä»¶');
            },
            
            // å¯¼å…¥æ•°æ®
            importData() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const imported = JSON.parse(e.target.result);
                            this.data = imported;
                            this.saveData();
                            this.updateDisplay();
                            this.showNotification('å¯¼å…¥æˆåŠŸ', 'å­¦ä¹ æ•°æ®å·²å¯¼å…¥');
                        } catch (error) {
                            this.showNotification('å¯¼å…¥å¤±è´¥', 'æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®', 'error');
                        }
                    };
                    reader.readAsText(file);
                };
                
                input.click();
            },
            
            // æ˜¾ç¤ºè®¾ç½®
            showSettings() {
                document.getElementById('enableRecommendations').checked = this.data.config.enableRecommendations;
                document.getElementById('lastBackupTime').textContent = this.data.config.lastBackup ? 
                    this.formatDate(new Date(this.data.config.lastBackup)) : 'ä»æœª';
                document.getElementById('settingsModal').style.display = 'flex';
            },
            
            // å…³é—­è®¾ç½®
            closeSettings() {
                document.getElementById('settingsModal').style.display = 'none';
            },
            
            // ä¿å­˜è®¾ç½®
            saveSettings() {
                this.data.config.enableRecommendations = document.getElementById('enableRecommendations').checked;
                this.saveData();
                this.updateRecommendation();
                this.updateCoachMessage();
                this.closeSettings();
                this.showNotification('è®¾ç½®å·²ä¿å­˜', 'ä¸ªæ€§åŒ–é…ç½®å·²æ›´æ–°');
            },
            
            // åˆ›å»ºå¤‡ä»½
            createBackup() {
                this.data.config.lastBackup = new Date().toISOString();
                this.saveData();
                this.showNotification('å¤‡ä»½åˆ›å»ºæˆåŠŸ', 'æ•°æ®å·²å®‰å…¨å¤‡ä»½');
                this.closeSettings();
            },
            
            // é‡ç½®æœ¬è½®
            showResetModal() {
                if (confirm('é‡ç½®æœ¬è½®å°†æ¸…ç©ºä»Šæ—¥å®ŒæˆçŠ¶æ€ï¼Œä½†ä¿ç•™ç»ƒä¹ è®°å½•ã€‚ç¡®å®šé‡ç½®å—ï¼Ÿ')) {
                    this.data.daily.completed = [];
                    this.data.todayCompleted = 0;
                    this.updateDisplay();
                    this.showNotification('é‡ç½®æˆåŠŸ', 'æœ¬è½®è¿›åº¦å·²é‡ç½®');
                }
            },
            
            // å·¥å…·å‡½æ•°
            getTodayDate() {
                return new Date().toISOString().split('T')[0];
            },
            
            getYesterdayDate() {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                return yesterday.toISOString().split('T')[0];
            },
            
            formatDate(date) {
                return `${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥`;
            },
            
            formatTime(minutes) {
                if (minutes < 60) return `${minutes}åˆ†é’Ÿ`;
                const hours = Math.floor(minutes / 60);
                const mins = minutes % 60;
                return mins > 0 ? `${hours}å°æ—¶${mins}åˆ†é’Ÿ` : `${hours}å°æ—¶`;
            },
            
            getTodayQuestions() {
                return this.data.daily.sessions.reduce((sum, session) => sum + session.practiceQuestions, 0);
            },
            
            getTodayAccuracy() {
                const totalQuestions = this.getTodayQuestions();
                const totalCorrect = this.data.daily.sessions.reduce((sum, session) => sum + (session.practiceQuestions - session.wrongCount), 0);
                return totalQuestions > 0 ? ((totalCorrect / totalQuestions) * 100).toFixed(1) : 0;
            },
            
            showNotification(title, message, type = 'info') {
                // ç®€åŒ–ç‰ˆé€šçŸ¥
                console.log(`ğŸ“¢ ${title}: ${message}`);
                alert(`${title}\n${message}`);
            },
            
            setupEventListeners() {
                // è§¦æ‘¸ä¼˜åŒ–
                document.addEventListener('touchstart', function() {}, { passive: true });
                
                // å®šæœŸä¿å­˜
                setInterval(() => {
                    this.saveData();
                }, 30000); // æ¯30ç§’è‡ªåŠ¨ä¿å­˜
                
                // ç›‘å¬storageå˜åŒ–ï¼ˆå¤šæ ‡ç­¾é¡µåŒæ­¥ï¼‰
                window.addEventListener('storage', (e) => {
                    if (e.key === 'studyData_v3') {
                        this.loadData();
                        this.updateDisplay();
                    }
                });
            },
            
            // è¿‡æ»¤æ¨¡å—
            filterModules(filterType) {
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
                this.updateModuleList();
            }
        };
        
        // å…¨å±€å‡½æ•°
        function showSettings() { StudySystem.showSettings(); }
        function closeSettings() { StudySystem.closeSettings(); }
        function saveSettings() { StudySystem.saveSettings(); }
        function startRecommended() { StudySystem.startRecommended(); }
        function startNewRound() { StudySystem.startNewRound(); }
        function reviewWeakModules() { StudySystem.reviewWeakModules(); }
        function showDailyReport() { StudySystem.showDailyReport(); }
        function exportData() { StudySystem.exportData(); }
        function importData() { StudySystem.importData(); }
        function showResetModal() { StudySystem.showResetModal(); }
        function filterModules(type) { StudySystem.filterModules(type); }
        
        // é¡µé¢åŠ è½½
        window.onload = function() {
            StudySystem.init();
        };
    </script>
</body>
</html>
